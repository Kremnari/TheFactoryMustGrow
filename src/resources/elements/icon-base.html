<template>
  <require from="./icon-base.scss"> </require>
  <span mouseenter.trigger="view.set({type: 'scope', which: 'tooltip', what: {tool: 'entity', item: mgrs.data.entity[item.name]}, if: hasEntity})" mouseleave.trigger="view.unset({which: 'tooltip'})">
    <div class="${item.filtered && 'ghosted'}">
      <img class="main" src.bind="mgrs.icon.getSrc(item.icon)" height="32px"/>
      <span if.bind="showName" class="nameField">${item.name}</span>
    </div>
    <div class="modis"> 
      <span if.bind="altImage" class="altImage"><img src="${mgrs.icon.getSrc(altImage)}" /></span>
      <span if.bind="max_fill"  class="max_fill" >/${max_fill}</span>
      <span if.bind="required" class="required">x${required}</span>
      <span if.bind="count!=undefined">${count}</span>
    </div>
    <div class="metas">
      <span if.bind="metas.showEntity && hasEntity" class="entityIcon">M</span>
      <span class="${metas.stalled && 'stalled'} fas fa-circle"></span>
    </div>
    <div if.bind="stalled" class="progressBarBase stalled"></div>
    <div
      if.bind="!stalled && progress"
      class="progressBarBase"
      css="border-image-source: linear-gradient(to right, green ${progress-5}%, red ${progress+10}%)"
    ></div>
    <div>
      <span class="animTarget ${item.animClass2}" style.bind="item.animTime"></span>
    </div>
  </span>
</template>
