<template>
  <scope-var var.bind="$scope = {tech: viewPane.showingItem}"></scope-var>
  <div click.capture="CCC.provide($event, 'which', 'tech', $scope.tech)">
    <div><icon-base item.bind="$scope.tech"></icon-base>${$scope.tech.name}</div>
    <div if.bind="!$scope.tech.researched">
      <strong>Cost</strong>
      <icon-base repeat.for="unit of $scope.tech.cost.ingredients" item.bind="unit[0]"></icon-base>
      x${$scope.tech.cost.count - $scope.tech.completeUnits}
    </div>
    <div>
      <strong>Unlocks</strong>
      <div repeat.for="unlock of $scope.tech.unlocks">
        <icon-base if.bind="typeof unlock === 'string'" item.bind="unlock" mouseenter.trigger="tooltip = unlock" mouseleave.trigger="tooltip = null"></icon-base>
        <span if.bind="typeof unlock === 'object'">Feature: ${unlock.feature}</span>
      </div>
    </div>
    <button click.delegate="CCC.issue('research.set', {}, $event)" if.bind="!globals.researching && !$scope.tech.researched" id="StartResearch">Research</button>
    <button click.delegate="CCC.issue('research.clear', {}, $event)" if.bind="globals.researching == $scope.tech">Cancel</button>
  </div>
</template>
