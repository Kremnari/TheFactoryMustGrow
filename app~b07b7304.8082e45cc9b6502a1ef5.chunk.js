(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"+Aae":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var a=n("mUjK"),r=n("EfK0"),i=n("MJ0g"),o=n("++kE"),u=n("ztCj"),c={icon:new a.a,item:new r.b,rec:new i.a,rounder:o.a,DS:null,idb:{set:u.f,get:u.d,del:u.c,clear:u.b,list:u.e}}},"Kh/G":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n("7jDb"),r={inv:{items:[]},workshop:{entities:[]}};a.a.provide_CCC("player.inventoryPush",(function(t,e){var n=e.getNamedObject("global").player.workshop.entities;t.which.itemStack.count>0&&e.data.entity[t.which.itemStack.name]&&e.addNewObject(t.to.entities,"player.entity",{name:t.which.itemStack.name,idx:n.length})&&(t.which.itemStack.count--,e.view.signaler.signal("entityUpdate"),e.view.signaler.signal("generalUpdate"))}),{which:"itemStack",to:"entities"}),a.a.CCC_addUtility("workshop.moveEntity",(function(t,e,n,a){var r=a.getNamedObject("global").player.workshop.entities,i=a.getId(e.which);e.to=i.order<e.to?Math.min(e.to,r.length-1):Math.max(e.to,0);var o=r.find((function(t){return a.getId(t).order==e.to}));(o=a.getId(o)).order=i.order,i.order=e.to,a.view.signaler.signal("entityUpdate")}));var i=function(t,e){var n=e.getId(t.which.entity);e.processTEMP(n,"entity.clearProcess",{return:t.player.inventory}),e.processTEMP(t.player.inventory,"inventory.add",{itemStacks:[{name:n.name,count:1}]});var a=e.getNamedObject("global").player.workshop.entities,r=a.findIndex((function(e){return e==t.which.entity}));a.splice(r,1);var i=n.order;a.forEach((function(t){var n=e.getId(t);n.order>i&&n.order--})),e.deleteObject(n),e.view.signaler.signal("entityUpdate")};i.signature={which:"entity",player:"inventory"},a.a.provide_CCC("workshop.recover",i,i.signature)},main:function(t,e,n){"use strict";n.d(e,"configure",(function(){return r}));n("ls82"),n("SYky");var a=n("BEPO");n("70NS");function r(t){t.use.standardConfiguration().plugin("aurelia-animator-css").plugin("aurelia-dialog").feature("resources/index"),t.use.developmentLogging(a.a?"debug":"warn"),a.b&&t.use.plugin("aurelia-testing"),t.start().then((function(){t.setRoot("app")}))}window.debugIf=function(t,e){t.$$_debug&&t.$$_debug.includes(e)},window.debugCheck=function(t,e){!t.$$_debug&&(t.$$_debug=[]),t.$$_debug.push(e)},Object.walkPath=function(t,e){for(var n=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),a=0,r=n.length;a<r;++a){var i=n[a];"object"==typeof t&&i in t?t=t[i]:Error("Couldn't walk the path completely")}return t}},uH5N:function(t,e,n){"use strict";var a=n("7jDb");function r(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}
//! I don't think these will work under all circumstances,
function o(t,e,n,a){if(n){for(var r,i=-1,o=4,u=a||0;u<t.length;u++)r=t[u],o>3&&!r&&(o=3,i=u),o>2&&r&&0==r.count&&(o=2,i=u),o>1&&r&&r.name==e&&(o=1,i=u);return 2==o&&(t[i].icon=null),i}var c=t.slice().reverse().findIndex((function(t){return t&&t.name==e&&t.count>0}));return-1==c?-1:t.length-1-c}function u(t,e,n,a){if("string"==typeof t&&t.includes("id")&&(t=a.getId(t).items),t.items&&(t=t.items),e.name){n._result=0;for(var i,o=r(t);!(i=o()).done;){var u=i.value;u&&u.name==e.name&&(n._result+=u.count)}}else if(e.names)for(var c,s=r(t);!(c=s()).done;){var m=c.value;m&&e.names.indexOf(m.name)>-1&&(!n[m.name]&&(n[m.name]=0),n[m.name]+=m.count)}}a.a.addOperation("inventory.add",(function(t,e,n,a){
//! needs to handle a multiplier from args
var i=e.itemStacks;Array.isArray(i)||(i=[i]);for(var u,c=[],s=0,m=r(i);!(u=m()).done;){var l=u.value;if(!l.count&&l.amount&&(l.count=l.amount),0!=l.count){var d=l.count*(e.multi||1);s=t.stackSize||a.data.item[l.name].stack_size;for(var f=o(t.items,l.name,s),v=0,p=void 0;!(e.stackLimit&&v>=e.stackLimit)&&f>-1&&d>0;)void 0===t.items[f]?(p=Math.min(s,d),t.items[f]={name:l.name,count:p},d-=p):(d-=p=Math.min(s-t.items[f].count,d),t.items[f].name=l.name,t.items[f].count+=p,0===p&&v++),d&&(f=o(t.items,l.name,s,f+1));-1!=f||t.maxStacks&&!(t.items.length<t.maxStacks)||e.stackLimit&&v>=e.stackLimit||(t.items.push({name:l.name,count:d}),d=0),d>0&&(
//! Theoretically, this would be the case of all existing inventory
//!   is different than the item or full
e.stackLimit?c.push({name:l.name,count:l.count-d}):c.push({name:l.name,count:d}))}}n.part=c,n.complete=0==c.length})),a.a.addOperation("inventory.consume",(function(t,e,n,a){var i=e.itemStacks;Array.isArray(i)||(i=[i]);for(var u,c=[],s=r(i);!(u=s()).done;){var m=u.value;!m.count&&m.amount&&(m.count=m.amount);for(var l=o(t.items,m.name),d=m.count*(e.multi||1);l>-1&&d;){var f=Math.min(t.items[l].count,d);t.items[l].count-=f,d-=f,l=o(t.items,m.name)}if(c.push({name:m.name,count:m.count*(e.multi||1)-d}),d&&!e.partial)
//! we have failed to consume all
return a.processTEMP(t,"inventory.add",{itemStacks:c}),n._result=!1,n}n._result=e.partial&&c||!0})),a.a.addOperation("inventory.total",u),a.a.CCC_addUtility("inventory.total",u)}}]);
//# sourceMappingURL=app~b07b7304.8082e45cc9b6502a1ef5.bundle.map