(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{iVgR:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a("7jDb"),r=a("463H"),o=a("Kh/G"),s=(a("iVpH"),a("uH5N"),a("v3/l"),{Setup:function(e,t){var a=t.getNamed("global");!a.activeFeatures.offenseBlocks&&(a.activeFeatures.offenseBlocks={}),a.activeFeatures.offenseBlocks.radar=!0,a.scanning={nextCost:100,currentAccum:0,radarCount:0,landsSurveyed:[],foundTotal:0,enemyDepth:0,penetrateEnemy:!1,penetrateDepth:!1},t.addEventHandler("tick",s.RadarTick)}});s.Setup.Igor_Event={name:"SetupExpansion",type:"FeatureUpdate"},s.AddRadar=function(e,t){t.processTEMP("player.inventory","inventory.consume",{itemStacks:{name:"radar",count:1}})&&t.getNamedObject("global").scanning.radarCount++},s.AddRadar.signature={},s.AddRadar.CC_provide="expansion.AddRadar",s.RadarTick=function(e,t){if(!(e.ticks%60)){var a=t.getNamedObject("global").scanning;if(0!=a.radarCount&&!(a.enemyDepth>=5)&&!(a.landsSurveyed.length>=10)&&(a.currentAccum+=10*a.radarCount,a.currentAccum>=a.nextCost)){a.foundTotal++,a.currentAccum-=a.nextCost,a.nextCost*=2;var n=[{item:{type:"empty",strength:!1},weight:2},{item:{type:"enemy",strength:100*a.foundTotal},weight:4},{item:{type:"resource",strength:!1},weight:1}],r=n.map((function(e,t){return Array(e.weight).fill(t)})).reduce((function(e,t){return e.concat(t)}),[]),o=n[r[Math.floor(Math.random()*r.length)]].item;"enemy"==o.type&&a.enemyDepth++,5==a.enemyDepth&&(a.penetrateEnemy=!0),a.landsSurveyed.push(o),a.landsSurveyed.length>=10&&(a.penetrateDepth=!0)}}},n.a.defineFeature("Expansion",s);var c={Setup:function(e,t){var a=t.getNamed("global");!a.activeFeatures.offenseBlocks&&(a.activeFeatures.offenseBlocks={}),a.activeFeatures.offenseBlocks.offenses=!0,a.offense={offenseBots:0}}};c.Setup.Igor_Event={name:"SetupOffense",type:"FeatureUpdate"},c.AddOffenseBot=function(e,t){t.processTEMP("player.inventory","inventory.consume",{itemStacks:{name:"offenseBot",count:1}})&&t.getNamedObject("global").offense.offenseBots++},c.AddOffenseBot.signature={},c.AddOffenseBot.CC_provide="offense.AddOffenseBot",c.Attack=function(e,t){var a=t.getNamedObject("global"),n=a.scanning.landsSurveyed[0];if("enemy"==n.type){var r=n.strength-10*a.offense.offenseBots;n.strength=Math.max(r,0),a.offense.offenseBots=Math.abs(Math.min(0,r/10))}},c.Attack.signature={},c.Attack.CC_provide="offense.Attack",c.Secure=function(e,t){var a=t.getNamedObject("global"),n=a.scanning.landsSurveyed[0];if(n.strength)return t.view.warnToast("Enemy still has a presence");switch(n.type){case"resource":a.land.res_patches++;break;case"enemy":a.scanning.enemyDepth--,a.scanning.penetrateEnemy=!1}a.land.total+=100,t.view.goodToast("Land secured"),scan.penetrateDepth=!1,a.scanning.landsSurveyed.shift(),t.view.signaler.signal("updateEnemy")},c.Secure.signature={},c.Secure.CC_provide="offense.Secure",n.a.defineFeature("Offense",c);var d={Setup:function(e,t){var a=t.getNamed("global");!a.activeFeatures.defenseBlocks&&(a.activeFeatures.defenseBlocks={}),a.activeFeatures.defenseBlocks.defense=!0,a.defense={turrets:0,attackWaveTimer:0,nextAttackWave:100},t.addEventHandler("tick",d.tick)}};d.Setup.Igor_Event={name:"SetupDefense",type:"FeatureUpdate"},d.addTurret=function(e,t){t.processTEMP("player.inventory","inventory.consume",{itemStacks:{name:"turret",count:1}})&&t.getNamedObject("global").defense.turrets++},d.addTurret.signature={},d.addTurret.CC_provide="defense.AddTurret",d.tick=function(e,t){if(!(e.ticks%30)){var a=t.getNamedObject("global").defense;if(++a.attackWaveTimer>=a.nextAttackWave){var n,r;t.view.warnToast("Attack wave"),a.attackWaveTimer=0,a.nextAttackWave=1.2*a.nextAttackWave;var o=null==(n=t.getNamedObject("global").scanning)||null==(r=n.landsSurveyed)?void 0:r[0];"enemy"==(null==o?void 0:o.type)&&(a.nextAttackWave*=.8)}else a.nextAttackSecs=Math.ceil(a.nextAttackWave-a.attackWaveTimer)}},n.a.defineFeature("Defense",d);var i={land:{total:100,used:0,complexity:0,res_patches:2,res_patches_used:0,fac_block_costs:{factory:100,bus:100,research:100}},scanning:{nextCost:100,currentCost:0},attackWaves:{nextTimer:100,nextStrength:100,currentTimer:0},facBlocks:{defenses:null,defenseBus:null,offense:null,offenseBus:null,resBlocks:[],buses:[],blocks:[],techBlocks:[]},player:o.a,activeFeatures:{tutorial:!0},research:{completed:{},progressing:null},unlocked_recipes:[],control:{bonusTicks:0},version:r.a};n.a.defineObj("#",i),n.a.setNamed("player.inventory","player.inv"),n.a.setNamed("research","research"),n.a.setNamed("global",""),n.a.setStatic("config.TICKS_PER_SECOND",r.e),n.a.addEventHandler("gameLoad",(function(e){var t=n.a.getNamed("global");if(t.control){var a=(new Date).getTime()-t.control.lastSave,o=Math.floor(a/1e3*r.e);console.log("added: "+o),t.control.bonusTicks+=Math.floor(o/20)}else t.control={bonusTicks:0}})),n.a.addEventHandler("gameSave",(function(e){n.a.getNamed("global").control.lastSave=(new Date).getTime()})),n.a.provide_CCC("game.fastForward",(function(e,t){var a=t.getNamedObject("global");"true"==e.to.string&&a.control.bonusTicks>0?(a.control.fastForward=!0,t.ticker.fastForward()):(a.control.fastForward=!1,t.ticker.fastForward(!1))}),{to:"string"}),n.a.addEventHandler("tick",(function(e,t){var a=t.getNamedObject("global");a.control.fastForward&&(a.control.bonusTicks--,a.control.bonusTicks<=0&&(a.control.fastForward=!0,t.ticker.fastForward(!1),a.control.bonusTicks=0))}));var u=function(){}}}]);
//# sourceMappingURL=app~fa1e48bf.b26fb9f30879ffda6d9f.bundle.map