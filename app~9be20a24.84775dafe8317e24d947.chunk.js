(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"resources/elements/dataEditor":function(e,i,t){"use strict";t.r(i),t.d(i,"DataEditor",(function(){return m})),t.d(i,"ListSuggestionService",(function(){return v}));var n,a,d,r=t("aurelia-framework"),s=t("+Aae"),o=t("ztCj"),c=t("Iab2");function l(e,i,t,n,a,d,r){try{var s=e[d](r),o=s.value}catch(e){return void t(e)}s.done?i(o):Promise.resolve(o).then(n,a)}function u(e){return function(){var i=this,t=arguments;return new Promise((function(n,a){var d=e.apply(i,t);function r(e){l(d,n,a,r,s,"next",e)}function s(e){l(d,n,a,r,s,"throw",e)}r(void 0)}))}}var p,g,b,h,f,y,m=(d=function(){function e(){var e,i,t,n;this.editList=null,this.eTypes=["crafter","miner","research","defense","offense"],e=this,i="editType",n=this,(t=a)&&Object.defineProperty(e,i,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(n):void 0}),s.a.de=this,this.mgrs=s.a,this.store=new o.a("TFMG_DATA","store")}var i=e.prototype;return i.detached=function(){this.editing=null,this.editList=null,this.editType=null},i.editTypeChanged=function(e){if(e){if("icons"==e)return this.editList=null,void(this.editing=null);this.editList=s.a.data[e],this.editing=null}},i.selectEdit=function(e){this.editing=s.a.data[this.editType][e],"entity"==this.editType&&(this.editing.crafting_categories?(this.eTypeSelect="crafter",this.editing.subType="crafter"):this.editing.resource_categories?(this.eTypeSelect="miner",this.editing.subType="miner"):this.editing.inputs?(this.eTypeSelect="research",this.editing.subType="research"):this.editing.defense_value?(this.eTypeSelect="defense",this.editing.subType="defense"):this.editing.offense_value&&(this.eTypeSelect="offense",this.editing.subType="offense"))},i.addNew=function(){this.editing={type:this.editType},"recipe"==this.editType&&(this.editing.ingredients=[{name:"__someitem__",amount:1}],this.editing.category="crafting",this.editing.results=[{name:"__someitem__",amount:1}],this.editing.enabled=!1),"technology"==this.editType&&(this.editing.prerequisites=["__sometech__"],this.editing.unlocks=["__somerecipe__"],this.editing.cost={ingredients:[["automation-science-pack",1]]})},i.copyItem=function(){this.editing=Object.assign({},this.editing)},i.saveItem=function(){"research"==this.eTypeSelect&&"string"==typeof this.editing.inputs&&(this.editing.inputs=this.editing.inputs.split(",")),s.a.data[this.editType][this.editing.name]=this.editing,this.editing=null},i.deleteItem=function(){delete s.a.data[this.editType][this.editing.name],delete this.editList[this.editing.name],this.editing=null},i.saveDataSet=function(){Object(o.f)("TFMG_BASE_DATA_dataSet",s.a.data,this.store),this.editList=null,this.editType=null},i.dlDataSet=function(){var e=JSON.parse(JSON.stringify(s.a.data));e.icons=void 0;var i=new File([JSON.stringify(e)],"data_source.json",{type:"application/json"});Object(c.saveAs)(i)},i.dlImageSet=function(){var e=u(regeneratorRuntime.mark((function e(){var i,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.idb.get("Icons");case 2:i=e.sent,t=new File([JSON.stringify(i)],"data_images.json",{type:"application/json"}),Object(c.saveAs)(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i.dlLocalization=function(){var e=u(regeneratorRuntime.mark((function e(){var i,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.idb.get("Localization");case 2:i=e.sent,t=new File([JSON.stringify(i)],"local.json",{type:"application/json"}),Object(c.saveAs)(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i.close=function(){s.a.baseApp.view.ctrl.version=null},e}(),p=(n=d).prototype,g="editType",b=[r.e],h={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},y={},Object.keys(h).forEach((function(e){y[e]=h[e]})),y.enumerable=!!y.enumerable,y.configurable=!!y.configurable,("value"in y||y.initializer)&&(y.writable=!0),y=b.slice().reverse().reduce((function(e,i){return i(p,g,e)||e}),y),f&&void 0!==y.initializer&&(y.value=y.initializer?y.initializer.call(f):void 0,y.initializer=void 0),void 0===y.initializer&&(Object.defineProperty(p,g,y),y=null),a=y,n),v=function(){function e(e){this.type=e}var i=e.prototype;return i.suggest=function(e){if(""===e)return Promise.resolve([]);e=e.toLowerCase();var i=s.a.data[this.type].filter((function(i){return 0===i.name.toLowerCase().indexOf(e)})).map((function(e){return e.name}));return Promise.resolve(i)},i.getName=function(e){return e},e}()},"resources/elements/dataEditor.html":function(e,i,t){e.exports='<template>\n  <require from="./dataEditor.scss"></require>\n  <require from="./iconEditor"></require>\n  <header>\n    <h5 click.delegate="editType=\'item\'">Items</h5>\n    <h5 click.delegate="editType=\'recipe\'">Recipes</h5>\n    <h5 click.delegate="editType=\'technology\'">Technologies</h5>\n    <h5 click.delegate="editType=\'resource\'">Resources</h5>\n    <h5 click.delegate="editType=\'entity\'">Entities</h5>\n    <br>\n    <h5 click.delegate="editType=\'localization\'">Localization</h5>\n    <h5 click.delegate="editType=\'icons\'">Icons</h5>\n  </header>\n  <main>\n    <div if.bind="!editing">\n      <ul class="icon-list">\n        <img\n          repeat.for="each of editList | objectValues"\n          src.bind="mgrs.icon.getSrc(each.icon)"\n          click.delegate="selectEdit(each.name)"\n          alt="${each.name}"\n          >\n        </img>\n      </ul>\n    </div>\n    <div if.bind="editType==\'icons\'">\n      <icon-editor></icon-editor>\n    </div>\n    <div if.bind="editType==\'localization\'">\n      localizations\n    </div>\n    <div if.bind="editing">\n      Name: <input type="text" value.bind="editing.name"><br>\n      Icon: <input type="text" value.bind="editing.icon"><br>\n      <img src.bind="mgrs.icon.getSrc(editing.icon)" alt="each.name"></img>\n      <div if.bind="editType==\'item\'">\n        StackSize: <input type="text" value.bind="editing.stack_size">\n      </div>\n      <div if.bind="editType==\'recipe\'">\n        Time: <input type="number" value.bind="editing.crafting_speed">\n        Enabled: <input type="checkbox" checked.bind="editing.enabled"><br>\n        Category: <input type="text" value.bind="editing.category"><br>\n        Ingredients: <textarea value.bind="editing.ingredients | jsonString" rows="6"></textarea><br>\n        Results: <textarea value.bind="editing.results | jsonString" rows="6"></textarea><br>\n      </div>\n      <div if.bind="editType==\'technology\'">\n        Enabled: <input type="checkbox" checked.bind="editing.enabled">\n        Hidden: <input type="checkbox" checked.bind="editing.hidden"><br>\n        Description: <textarea value.bind="editing.description" rows="6"></textarea><br>\n        Prereqs:<textarea value.bind="editing.prerequisites | jsonString" rows="6"></textarea><br>\n        Unlocks:<textarea value.bind="editing.unlocks | jsonString" rows="6"></textarea><br>\n        Cost: <input type="number" value.bind="editing.cost.count">\n        Time: <input type="number" value.bind="editing.cost.time"><br>\n        Ingredients: <textarea value.bind="editing.cost.ingredients | jsonString" rows="6"></textarea>\n      </div>\n      <div if.bind="editType==\'resource\'">\n        Time: <input type="number" value.bind="editing.mining_time">\n        Results: <input type="text" value.bind="editing.mining_results"><br>\n        Cat:  <input type="text" value.bind="editing.category">\n      </div>\n      <div if.bind="editType==\'entity\'">\n        Space used: <input value.bind="editing.space" type="number"></input>\n        <fieldset>\n          <label repeat.for="eType of eTypes">\n            <input type="radio" name="eType" value.bind="eType" checked.bind="eTypeSelect">\n            ${eType}\n          </label>\n        </fieldset>\n        <div if.bind="eTypeSelect==\'crafter\'">\n          <h5>Crafter</h5>\n          CraftCats: <textarea value.bind="editing.crafting_categories"></textarea>\n          Speed:<input type="number" value.bind="editing.crafting_speed">\n        </div>\n        <div if.bind="eTypeSelect==\'miner\'">\n          <h5>Miner</h5>\n          ResCats: <textarea value.bind="editing.resource_categories"></textarea>\n          Speed:<input type="number" value.bind="editing.mining_speed">\n        </div>\n        <div if.bind="eTypeSelect==\'research\'">\n          <h5>Researcher</h5>\n          Inputs: <textarea value.bind="editing.inputs"></textarea>\n          Speed: <input type="number" value.bind="editing.researching_speed">\n        </div>\n        <div if.bind="eTypeSelect==\'defense\'">\n          <h5>Defense</h5>\n          Value: <input type="number" value.bind="editing.defense_value">\n          Range: <input type="number" value.bind="editing.defense_range">\n        </div>\n        <div if.bind="eTypeSelect==\'offense\'">\n          <h5>Offense</h5>\n          Attack: <input type="number" value.bind="editing.offense_value">\n          Supply: <input type="number" value.bind="editing.offense_supply">\n          Radar: <input type="number" value.bind="editing.radar">\n        </div>\n      </div>\n    </div>\n  </main>\n  <footer class="btn-group">\n    <span class="btn btn-secondary" click.delegate="editing = null" if.bind="editing">cancel</span>\n    <span class="btn btn-danger" click.delegate="deleteItem()" if.bind="editing">Delete</span>\n    <span class="btn btn-success" click.delegate="saveItem()" if.bind="editing">save Item</span>\n    <span class="btn btn-success" click.delegate="copyItem()" if.bind="editing">Copy Item</span>\n    <span class="btn btn-secondary" click.delegate="close()" if.bind="!editing">Close</span>\n    <span class="btn btn-primary" click.delegate="addNew()" if.bind="!editing && editType">Add</span>\n    <span class="btn btn-info" click.delegate="saveDataSet()" if.bind="!editing">save list</span>\n    <span class="btn btn-light" click.delegate="dlDataSet()" if.bind="!editing && editType!=\'icons\'">download</span>\n    <span class="btn btn-light" click.delegate="dlImageSet()" if.bind="editType==\'icons\'">dl Images</span>\n  </footer>\n</template>\n'},"resources/elements/dataEditor.scss":function(e,i,t){(i=t("JPst")(!1)).push([e.i,"data-editor{width:100%;height:100%;position:relative;display:grid;grid-template-columns:20% auto;grid-template-rows:10% auto max(8%,15px);-moz-column-gap:10px;column-gap:10px;row-gap:5px}data-editor header{overflow-x:auto;grid-row:1/2;grid-column:1/3}data-editor header h5{display:inline-block}data-editor aside{overflow-y:scroll;overflow-x:auto;grid-row:2/3;grid-column:1/2}data-editor aside::-webkit-scrollbar{width:10px}data-editor aside ol{list-style-type:none;-webkit-padding-start:0;padding-inline-start:0}data-editor main{grid-row:2/3;grid-column:1/3;overflow-y:auto}data-editor footer{grid-row:3/4;grid-column:1/3}data-editor textarea{resize:both;width:100%}data-editor input,data-editor textarea{background-color:#483d8b;color:#db7093}data-editor .list-group .list-group-item{padding:2px 4px;background-color:#483d8b}data-editor img{max-height:48px;max-width:48px;min-width:16px;min-height:16px;border:2px dotted #006400;border-radius:4px}#editDataSource{height:100vh;width:100vw}",""]),e.exports=i}}]);
//# sourceMappingURL=app~9be20a24.84775dafe8317e24d947.bundle.map