(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+Aae":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("mUjK"),r=n("EfK0"),s=n("O9YP"),u=n("MJ0g"),a=n("59E+"),o=n("rOV7"),c=n("++kE"),f=n("fcJs"),l=n("ztCj"),p={icon:new i.a,item:new r.c,res:new s.a,tech:new a.a,rec:new u.a,entity:new f.a,rounder:c.a,DS:null,idb:{set:l.c,get:l.b,del:l.a},Ticker:new o.a}},"8p7n":function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return l}));var i=n("fcJs"),r=n("EfK0"),s=n("+Aae");n("wb4v");function u(e,t,n,i,r,s,u){try{var a=e[s](u),o=a.value}catch(e){return void n(e)}a.done?t(o):Promise.resolve(o).then(i,r)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var s=e.apply(t,n);function a(e){u(s,i,r,a,o,"next",e)}function o(e){u(s,i,r,a,o,"throw",e)}a(void 0)}))}}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var f=function(){function e(e,t){var n,u=this;switch(this.entityTypes=!1,this.upgrades={},e){case"resource":n={output:!0,line:!0},this.entityTypes="mining";break;case"bus":n={input:!0,output:!0,delay:!0};break;case"research":n={input:!0,line:!0},this.entityTypes="research";break;case"factory":default:this.entityTypes="crafting",n={input:!0,output:!0,line:!0}}this.lines=[],this.transports=[],this.feeds=[],this.drains=[],this.name=t,this.type=e,this.upgrades={base:this},n.input&&(this.upgrades.input={buffers:{count:0,type:"buffers",max:3},loaders:{count:0,type:"loaders",max:10}},this.inputLine=new r.a(5,5)),n.output&&(this.upgrades.output={buffers:{count:0,type:"buffers",max:3},loaders:{count:0,type:"loaders",max:10}},this.outputLine=new r.a(5,5)),n.line&&this.lines.push(new i.b(this,{type:this.entityTypes,feed:this.inputLine,drain:this.outputLine})),this.line_select=n.line?1:0,s.a.Ticker.subscribe((function(e){return u.tick(e)}))}e.deserialize=function(t,n){return new e};var t=e.prototype;return t.serialize=function(){return{}},t.tick=function(e){if(e.ticks%16==0)if("bus"==this.type)for(var t,n=o(this.drains);!(t=n()).done;){var i=t.value;if("bus"==i.type)return;i.inputLine.absorbFrom(this.outputLine)}else{var s;if(this.inputLine)for(var u,a=o(this.inputLine.getTypes(!1));!(u=a()).done;){var c=u.value,f=this.inputLine.total(c);if(f>0){var l=this.lines[0].recieveItem(new r.b(c,f));console.log("con: "+l),this.inputLine.consume(c,l),console.log("total: "+this.inputLine.total(c))}}e.fromParent={feed:this.inputLine,drain:this.outputLine};for(var p,d=o(this.lines);!(p=d()).done;){p.value.tick(e)}null==(s=this.drains[0])||s.inputLine.absorbFrom(this.outputLine)}},t.useItem=function(e,t){return void 0===t&&(t=this.line_select),this.lines[0].AddEntity(e)},t.add_EntityLine=function(){this.lines.splice(-1,0,new r.a(5),new i.b(this,this.entityTypes))},t.SelectBusFeed=function(){var e=a(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.DS.open("SelectBus",{base:s.a.baseApp});case 2:if(null==(t=e.sent)?void 0:t.selected){e.next=5;break}return e.abrupt("return");case 5:this.AddBusFeed(t.selected);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.AddBusFeed=function(e){this.inputLine&&e&&!this.feeds.includes(e)&&(this.feeds.push(e),e.AddBusDrain(this))},t.DelBusFeed=function(e){this.feeds=this.feeds.filter((function(t){return t!=e}))},t.SelectBusDrain=function(){var e=a(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.DS.open("SelectBus",{base:s.a.baseApp});case 2:if(null==(t=e.sent)?void 0:t.selected){e.next=5;break}return e.abrupt("return");case 5:this.AddBusDrain(t.selected);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.AddBusDrain=function(e){e&&!this.drains.includes(e)&&(this.drains.push(e),e.AddBusFeed(this))},t.DelBusDrain=function(e){this.drains=this.drains.filter((function(t){return t!=e}))},t.ApplyUpgrade=function(e){"buffers"!=e.upgrade.type?"loader"!=e.upgrade.type||0==e.inv.consume("inserter",2)&&e.upgrade.count++:0==e.inv.consume("iron-chest",2)&&e.upgrade.count++},e}(),l=function(){function e(e){var t=this;this.inv=new r.a(e),this.entityStore=new i.b(this),s.a.Ticker.subscribe((function(e){t.tick(e)}))}e.deserialize=function(t,n){var i=new e;return i.inv.deserialize(n.inv),i.entityStore.deserialize(n.entityStore),i};var t=e.prototype;return t.serialize=function(){var e={};return e.inv=this.inv.serialize(),e.entityStore=this.entityStore.serialize(),e},t.getEntities=function(e){var t,n;return Array.from((null==(t=this.entityStore.entityTags.get("type"))||null==(n=t.get(e))?void 0:n.values())||[])},t.useItem=function(e){return this.entityStore.AddEntity(e)},t.tick=function(e){e.fromParent={feed:this.inv,drain:this.inv},this.entityStore.tick(e)},e}()},main:function(e,t,n){"use strict";n.d(t,"configure",(function(){return r}));n("ls82"),n("SYky");var i=n("BEPO");n("70NS");function r(e){e.use.standardConfiguration().plugin("aurelia-animator-css").plugin("aurelia-dialog").feature("resources/index"),e.use.developmentLogging(i.a?"debug":"warn"),i.b&&e.use.plugin("aurelia-testing"),e.start().then((function(){return e.setRoot("app")}))}}}]);
//# sourceMappingURL=app~5a11b65b.837d9282fc8e020b65fa.bundle.map