(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{iVgR:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("7jDb"),s=n("463H"),a=n("Kh/G"),i=function(e,t,n){return t.buffers={},Object.assign(t,n.data.entity[e.name]),t.size=t.space,t.space=void 0,"miner"!=t.subType&&"crafter"!=t.subType||(t.buffers.out=n.newComponent("entity.buffer",{dir:"out"},t)),"crafter"!=t.subType&&"research"!=t.subType||("research"==t.subType?(t.buffers.in=n.newComponent("entity.buffer",{staticStacks:t.inputs,dir:"in"},t),t.research_timer=null,t.$_tags.push("researchTicker",!0)):t.buffers.in=n.newComponent("entity.buffer",{dir:"in"},t)),t.order=e.idx,[t]};i._delete=function(e,t){e.buffers.in&&t.deleteObject(e.buffers.in),e.buffers.out&&t.deleteObject(e.buffers.out),t.getNamedObject("global").land.used-=t.data.entity[e.name].space},r.a.defineObj("player.entity",i,{tick:function(e,t,n){if(e.processing)if(Number.isNaN(e.process_timer)||null===e.process_timer)"miner"==e.subType||n.processTEMP(e.buffers.in,"inventory.consume",{itemStacks:e.processing.ingredients})?e.process_timer=e.process_ticks:e.$_tags.delete("tick");else{if(e.process_timer&&--e.process_timer,e.process_timer<=0){var r=n.getId(e.buffers.out);n.processTEMP(r,"inventory.add",{itemStacks:e.buffers.stalled||e.processing.results||{name:e.processing.mining_results,count:1}}).complete?e.process_timer=NaN:e.$_tags.delete("tick")}n.view.signaler.signal("bufferUpdate")}else e.$_tags.delete("ticking")}}),r.a.addObjectTickHandler("player.entity",(function(e,t,n){var r=n.getNamedObject("research").progressing;if(r){if(Number.isNaN(e.research_timer)||null===e.research_timer){var s;if(!r.cost.ingredients.every((function(t){var r=t[0],s=t[1];return n.processTEMP(e.buffers.in,"inventory.total",{name:r})>=s})))return;r.cost.ingredients.forEach((function(t){var r=t[0],s=t[1];n.processTEMP(e.buffers.in,"inventory.consume",{itemStacks:{name:r,count:s}})}));var a=n.getId(e.buffers.in);return(null==a||null==(s=a.upgrades.loader)?void 0:s.count)&&a.$_tags.push("tick","processing"),e.research_time=r.cost.time*n.getStatic("config.TICKS_PER_SECOND")*e.researching_speed,void(e.research_timer=e.research_time)}e.research_timer&&--e.research_timer,e.research_timer<=0&&(n.processTEMP(r,"research.update",{}),e.research_timer=NaN),n.view.signaler.signal("bufferUpdate")}}),"researchTicker",{chain:["tick","researchTicker"],num:3});r.a.provide_CCC("entity.setProcess",(function(e,t){if(!e.at.entity.processing&&null!=e.which.process||(t.processTEMP(e.at.entity,"entity.clearProcess",{returnTo:e.player.inventory}),e.which.process))if(e.at.entity.processing=e.which.process,e.at.entity.$_tags.push("tick","processing"),"mining"==e.type.class)e.at.entity.process_ticks=e.which.process.mining_time/e.at.entity.mining_speed*t.getStatic("config.TICKS_PER_SECOND"),e.at.entity.process_timer=e.at.entity.process_ticks;else if("crafting"==e.type.class){if(e.at.entity.process_ticks=e.which.process.crafting_speed/e.at.entity.crafting_speed*t.getStatic("config.TICKS_PER_SECOND"),e.at.entity.buffers.in){var n=t.getId(e.at.entity.buffers.in);if(n.stacks<e.which.process.ingredients.length)return t.view.warnToast("Recipe exceedes machines ingredient limit");e.which.process.ingredients.forEach((function(e,t){n.items[t]={name:e.name,count:0}}))}if(e.at.entity.buffers.out){var r=t.getId(e.at.entity.buffers.out);if(r.stacks<e.which.process.results.length)return t.view.warnToast("Recipe exceedes machines results limit");e.which.process.results.forEach((function(e,t){r.items[t]={name:e.name,count:0}}))}e.at.entity.process_timer=NaN}}),{at:"entity",which:"process",type:"class",player:"inventory"}),r.a.addOperation("entity.clearProcess",(function(e,t,n,r){if(e.buffers.in){e.process_timer&&r.processTEMP("player.inventory","inventory.add",{itemStacks:e.processing.ingredients});var s=r.getId(e.buffers.in);r.processTEMP("player.inventory","inventory.add",{itemStacks:s.items}),//! If args.returnTo is full, 'inventory.add' will fail silently
s.items.length=0,s.xferStack=0,s.stalled=!1}if(e.buffers.out){var a=r.getId(e.buffers.out);r.processTEMP("player.inventory","inventory.add",{itemStacks:a.items}),//! If args.returnTo is full, 'inventory.add' will fail silently
a.items.length=0,a.xferStack=0,a.stalled=!1}e.buffers.stalled&&(r.processTEMP("player.inventory","inventory.add",{itemStacks:e.buffers.stalled}),e.buffers.stalled=null),e.processing=null})),r.a.setStatic("entityBuffer.sizeExpansionCost",[{name:"iron-chest",count:1}]),r.a.setStatic("entityBuffer.xferExpansionCost",[{name:"inserter",count:1}]);var c=function(e,t,n){var r,s;return t.upgrades={maxBuffers:6,maxInserters:10},t.maxStacks=(null==(r=e.staticStacks)?void 0:r.length)||e.stacks||1,t.stackSize=e.stackSize||5,t.items=(null==(s=e.staticStacks)?void 0:s.map((function(e){return{name:e,count:0}})))||[],t.xfer=0,t.xferTicks=120,t.xferStack=0,t.busShift=0,t.xferTimer=NaN,t.restrictable=e.restrictable||!1,t.connection=null,t.dir=e.dir,t.active=!1,[t]};c._delete=function(e,t){var n,r,s=t.getNamedObject("player.inventory"),a=t.getNamedObject("global").land;(null==(n=e.upgrades.bufferSize)?void 0:n.count)&&(e.$_parent&&(t.getId(e.$_parent).size-=e.upgrades.bufferSize.count),a.used-=e.upgrades.bufferSize.count,t.processTEMP(s,"inventory.add",{itemStacks:t.getStatic("entityBuffer.sizeExpansionCost"),multi:e.upgrades.bufferSize.count})),(null==(r=e.upgrades.loader)?void 0:r.count)&&(e.$_parent&&(t.getId(e.$_parent).size-=e.upgrades.loader.count),a.used-=e.upgrades.loader.count,t.processTEMP(s,"inventory.add",{itemStacks:t.getStatic("entityBuffer.xferExpansionCost"),multi:e.upgrades.loader.count}))};var o={Collect:function(e,t){var n,r=t.getId(e.which.buffer),s=r.items.findIndex((function(t){return t.name==e.item.name}));-1==s&&console.warn("Didnt' find the right index"),0!==r.items[s].count&&(t.processTEMP("player.inventory","inventory.add",{itemStacks:r.items[s]}),r.items[s].count=0,t.getId(r.$_parent).$_tags.push("tick","processing"),t.view.signaler.signal("bufferUpdate"),(null==(n=r.upgrades.loader)?void 0:n.count)&&r.$_tags.push("tick","processing"))}};o.Collect.signature={which:"buffer",item:"name"},o.Collect.CC_provide="entity.bufferCollect",o.Fill=function(e,t){var n,r=t.getId(e.which.buffer),s=r.items.findIndex((function(t){return t.name==e.item.name}));-1==s&&console.warn("Didnt' find the right index");var a=t.processTEMP("player.inventory","inventory.total",{name:r.items[s].name});if(0!==a){var i=e.service.rounder.calc(r.items[s].count,r.stackSize,a);t.processTEMP("player.inventory","inventory.consume",{itemStacks:{name:r.items[s].name,count:i}}),r.items[s].count+=i,t.getId(r.$_parent).$_tags.push("tick","processing"),t.view.signaler.signal("bufferUpdate"),(null==(n=r.upgrades.loader)?void 0:n.count)&&r.$_tags.push("tick","processing")}},o.Fill.signature={which:"buffer",item:"name",service:"rounder"},o.Fill.CC_provide="entity.bufferFill",o.ClickCycle=function(e,t){t.getId(e.which.buffer).items.find((function(t){return t.name==e.item.name}))},o.ClickCycle.signature={which:"buffer",item:"name",service:"rounder"},o.ClickCycle.CC_provide="entity.bufferCycle",r.a.setStatic("entity.buffer.BUFFER_SIZE",[5,10,10,10,20,20,20]),r.a.setStatic("entity.buffer.BUFFER_SIZE.MAX",25),o.Upgrade=function(e,t){var n=t.getId(e.which.buffer),r=t.getNamedObject("global").land;if("autoload"==e.type.string){var s,a,i=(null==(s=e.cost)?void 0:s.stacks)||{name:"inserter",count:1};if((null==(a=n.upgrades.loader)?void 0:a.count)>=10)return t.view.warnToast("Loaders full");if(r.used>=r.total)return t.view.warnToast("No available land");if(!t.processTEMP(e.player.inventory,"inventory.consume",{itemStacks:i}))return t.view.warnToast("Inserter required");r.used++,n.$_parent&&t.getId(n.$_parent).size++,!n.upgrades.loader&&(n.upgrades.loader={count:0}),n.upgrades.loader.count++,n.xferTimer||(n.xferTimer=n.xferTicks),n.xfer++,n.active=!0,n.$_tags.push("tick","processing")}else if("buffer"==e.type.string){var c,o,u=(null==(c=e.cost)?void 0:c.stacks)||{name:"iron-chest",count:1};if((null==(o=n.upgrades.bufferSize)?void 0:o.count)>=n.upgrades.maxBuffers)return t.view.warnToast("Chests full");if(r.used>=r.total)return t.view.warnToast("No available land");if(!t.processTEMP(e.player.inventory,"inventory.consume",{itemStacks:u}))return t.view.warnToast("Cannot consume upgrade costs");if(r.used++,n.$_parent){var f=t.getId(n.$_parent);f.size++,"player.entity"!=f.$_type&&t.processTEMP(n,"inventory.compress",{}),f.clogged&&(f.clogged=!1,f.$_tags.push("tick","processing"))}!n.upgrades.bufferSize&&(n.upgrades.bufferSize={count:0}),n.upgrades.bufferSize.count++,n.stackSize+=t.getStatic("entity.buffer.BUFFER_SIZE")[n.upgrades.bufferSize.count-1]||t.getStatic("entity.buffer.BUFFER_SIZE.MAX"),t.getId(n.$_parent).$_tags.push("tick","processing")}},o.Upgrade.signature={which:"buffer",type:"string",player:"inventory","cost.stacks":{optional:!0}},o.Upgrade.CC_provide="entity.bufferUpgrade",o.SetRestrictions=function(e,t,n,r){e.restrictable||(n._result=!1);var s=[],a=[];e.maxStacks=t.list.length;for(var i=0;i<e.items.length;i++){var c=e.items[i];c?t.list.includes(c.name)?(s.push(c.name),c.restricted=!0):(c.count>0&&r.processTEMP("player.inventory","inventory.add",{itemStacks:c}),e.items.splice(i,1),a.push(i)):a.push(i)}t.list.forEach((function(t){s.includes(t)||(a.length>0?e.items.splice(a.splice(0,1),1,{name:t,count:0,restricted:!0}):e.items.push({name:t,count:0,restricted:!0}))})),e.busShift>e.items.length&&(e.busShift=0)},o.SetRestrictions.Igor_operation="buffer.restrictList",o.HasRestriction=function(e,t,n,r){e.restrictable?e.items.forEach((function(e){e.name==t.itemName&&(e.restrictedBy.includes(t.lineId)?n._result={found:!0,restricted:!0}:n._result={found:!0,restricted:!1})})):n._result=!1,!n._result&&(n._result={found:!1,restricted:!1})},o.HasRestriction.Igor_operation="buffer.hasRestriction",o.ClearRestriction=function(e,t,n,r){e.restrictable||(n._result=!1);for(var s=-1;!("_result"in n);){var a=e.items[++s];a.name==t.itemName&&(a.restrictedBy.splice(a.restrictedBy.indexOf(t.lineId),1),0==a.restrictedBy.length?(e.items.splice(s,1),n._result={found:!0,cleared:!0}):n._result={found:!0,cleared:!1})}!n._result&&(n._result={found:!1,cleared:!1})},o.ClearRestriction.Igor_operation="buffer.clearRestriction",o.BusXfer=function(e,t,n,r){var s=e.busShift;if(t.toBus){for(;t.xferCount>0&&0<e.items.length;)if(e.items[e.busShift]){var a=r.processTEMP(e,"inventory.total",{name:e.items[e.busShift].name}),i=r.processTEMP(t.toBus,"inventory.add",{itemStacks:[{name:e.items[e.busShift].name,count:Math.min(t.xferCount,a)}]});if(i.complete)r.processTEMP(e,"inventory.consume",{itemStacks:[{name:e.items[e.busShift].name,count:t.xferCount}]}),t.xferCount=0;else{if(a-i.part[0].count==0)
//! This point breaks the loop
return++e.busShift==e.items.length&&(e.busShift=0),void(n.full=!0);r.processTEMP(e,"inventory.consume",{itemStacks:[{name:e.items[e.busShift].name,count:a-i.part[0].count}]}),t.xferCount=i.part[0].count}++e.busShift==e.items.length&&(e.busShift=0)}else if(++e.busShift>=e.items.length&&(e.busShift=0),e.busShift==s)return;n.complete=!0}else if(t.fromBus){for(var c=0;t.xferCount>0;)if(e.items[e.busShift]){var o=e.stackSize-e.items[e.busShift].count;if(o){var u=r.processTEMP(t.fromBus,"inventory.consume",{itemStacks:[{name:e.items[e.busShift].name,count:Math.min(t.xferCount,o)}],partial:!0});u[0].count>0&&(r.processTEMP(e,"inventory.add",{itemStacks:[{name:e.items[e.busShift].name,count:u[0].count}]}),t.xferCount-=u[0].count)}if(++c==e.items.length)return void(n.full=!0);++e.busShift==e.items.length&&(e.busShift=0)}else if(++e.busShift>=e.items.length&&(e.busShift=0),e.busShift==s)return;n.complete=!0}else console.warn("BusXfer called __ no bus target")},o.BusXfer.Igor_operation="buffer.busXfer",o.BufferStalled=function(e,t,n,r){e.stalled=!0,e.xferTimer=Math.floor(e.xferTicks/6),++e.xferStack==e.items.length&&(e.xferStack=0)},o.BufferStalled.Igor_operation="buffer.setStall",o.tick=function(e,t,n){if(0!=e.items.length&&e.active){if(e.xferTimer>0)return e.xferTimer--;if("in"==e.dir){var r=Math.min(e.xfer,e.stackSize-e.items[e.xferStack].count);if(0==r)return n.processTEMP(e,"buffer.setStall");var s=n.processTEMP("player.inventory","inventory.consume",{itemStacks:{name:e.items[e.xferStack].name,count:r},partial:!0});if(0==s[0].count)return n.processTEMP(e,"buffer.setStall");e.items[e.xferStack].count+=s[0].count,e.xferTimer=e.xferTicks*s[0].count/e.xfer}else{var a=e.items[e.xferStack];if(!n.processTEMP("player.inventory","inventory.add",{itemStacks:{name:a.name,count:Math.min(a.count,e.xfer)},stackLimit:1}).complete)return n.processTEMP(e,"buffer.setStall");a.count-=Math.min(a.count,e.xfer),e.xferTimer=e.xferTicks}++e.xferStack==e.items.length&&(e.xferStack=0),e.stalled=!1,n.getId(e.$_parent).$_tags.push("tick","processing"),n.view.signaler.signal("bufferUpdate")}},r.a.defineObj("entity.buffer",c,o);r.a.provide_CCC("research.set",(function(e,t,n){var r=t.getNamedObject("global").research;r.progressing=e.which.tech,r[e.which.tech.name]||(r[e.which.tech.name]={completeUnits:0})}),{which:"tech"});r.a.provide_CCC("research.clear",(function(e,t,n){t.getNamedObject("global").research.progressing=null,t.view.signaler.signal("techResearched")}),{});r.a.addOperation("research.update",(function(e,t,n,r){var s=r.getNamedObject("global");if(s.research[e.name].completeUnits+=t.count||1,s.research[e.name].completeUnits>=e.cost.count){r.view.goodToast("Research Complete: "+e.name),n._result=s.research[e.name].completeUnits-e.cost.count,r.getNamedObject("research").progressing=null,e.researched=!0,s.research[e.name].complete=!0,e.unlocks.forEach((function(e){e.feature?r.checkAndEmit("system_update",e.feature,e):"recipe"==e.type?r.getNamedObject("global").unlocked_recipes.push(e.name):r.processTEMP(null,e.type+".unlock",{item:e})}));var a=e.cost.ingredients.map((function(e){return{name:e[0],count:e[1]}}));s.player.workshop.entities.forEach((function(e){var t=r.getId(e);"lab"==t.name&&(r.processTEMP(t.buffers.in,"inventory.add",{itemStacks:a,force:!0}),t.research_timer=NaN)})),s.facBlocks.techBlocks.forEach((function(e){if(t.me!=e){var n=r.getId(e);n.research_consumed&&(r.processTEMP(n.buffers.in,"inventory.add",{itemStacks:a,force:!0,multi:research_consumed}),n.research_consumed=0,n.research_ticks=NaN)}})),r.view.signaler.signal("techResearched")}}));r.a.addOperation("recipe.unlock",(function(e,t,n,r){}));r.a.addOperation("feature.unlock",(function(e,t,n,r){r.checkAndEmit("system_update",e.feature,e)||console.warn("System_update: "+e.feature+" not found")})),r.a.addOperation("global.unlock",(function(e,t,n,r){var s=r.getNamedObject("global"),a=Object.walkPath(s,t.item.path);if(!a)return console.warn("Could not find object path",t.item.path);switch(t.item.operation){case"add":a[t.item.key]+=t.item.value;break;case"sub":a[t.item.key]-=t.item.value;break;case"multiply":a[t.item.key]*=t.item.value;break;case"divide":a[t.item.key]/=t.item.value;break;case"exp":a[t.item.key]=Math.pow(a,t.item.value);break;case"set":a[t.item.key]=t.item.value}}));n("uH5N"),n("v3/l");var u={Setup:function(e,t){var n=t.getNamedObject("global");!n.activeFeatures.offenseBlocks&&(n.activeFeatures.offenseBlocks={}),n.activeFeatures.offenseBlocks.radar=!0,n.scanning={nextCost:100,currentAccum:0,radarCount:0,landsSurveyed:[],foundTotal:0,enemyDepth:0,enemyDefeated:0,penetrateEnemy:!1,penetrateDepth:!1}}};u.Setup.Igor_Event={name:"Expansion",type:"system_setup"},u.FeatureUpdate=function(e,t){!t.getNamedObject("global").scanning&&t.checkAndEmit("system_setup","Expansion"),t.addEventHandler("tick",u.RadarTick)},u.FeatureUpdate.Igor_Event={name:"Expansion",type:"system_update"},u.AddRadar=function(e,t){if(!t.processTEMP("player.inventory","inventory.consume",{itemStacks:{name:"radar",count:1}}))return t.view.warnToast("No radar in inventory");t.getNamedObject("global").scanning.radarCount++},u.AddRadar.signature={},u.AddRadar.CC_provide="expansion.AddRadar",u.Probabilities=function(e,t,n,r){var s=r.getNamedObject("global").scanning;n.options=[{item:{type:"empty",strength:!1},weight:2},{item:{type:"enemy",strength:100*(s.enemyDefeated+1)},weight:4},{item:{type:"resource",strength:!1},weight:1}],s.foundTotal<10&&(n.options.push({item:{type:"empty",strength:!1},weight:6}),n.options.push({item:{type:"resource",strength:!1},weight:2})),s.enemyDepth>3&&n.options.push({item:{type:"enemy",strength:150*(s.enemyDefeated+1)},weight:4}),n.probabilities=n.options.map((function(e,t){return Array(e.weight).fill(t)})).reduce((function(e,t){return e.concat(t)}),[]),t.returnItem&&(n._result=n.options[n.probabilities[Math.floor(Math.random()*n.probabilities.length)]].item)},u.Probabilities.Igor_operation="expansion.landProbabilities",u.RadarTick=function(e,t){if(!(e.ticks%60)){var n=t.getNamedObject("global").scanning;if(0!=n.radarCount&&!(n.enemyDepth>=5)&&!(n.landsSurveyed.length>=10)&&(n.currentAccum+=10*n.radarCount,n.currentAccum>=n.nextCost)){n.foundTotal++,n.currentAccum-=n.nextCost,n.nextCost*=2;var r=t.processTEMP({},"expansion.landProbabilities",{returnItem:!0});"enemy"==r.type&&n.enemyDepth++,5==n.enemyDepth&&(n.penetrateEnemy=!0),n.landsSurveyed.push(r),n.landsSurveyed.length>=10&&(n.penetrateDepth=!0)}}},r.a.defineFeature("Expansion",u);var f={Setup:function(e,t){var n=t.getNamedObject("global");!n.activeFeatures.offenseBlocks&&(n.activeFeatures.offenseBlocks={}),n.activeFeatures.offenseBlocks.offense=!0,!n.offense&&(n.offense={bots:{}})}};f.Setup.Igor_Event={name:"Offense",type:"system_setup"},f.FeatureUpdate=function(e,t){var n=t.getNamedObject("global");n.offense||t.checkAndEmit("system_setup","Offense"),e.addEntity&&(n.offense.bots[e.addEntity]={name:e.addEntity,count:0}),e.addComponent&&(n.offense[addComponent]=0)},f.FeatureUpdate.Igor_Event={name:"Offense",type:"system_update"},f.AddOffenseBot=function(e,t){t.processTEMP("player.inventory","inventory.consume",{itemStacks:{name:e.which.string,count:1}})&&t.getNamedObject("global").offense.bots[e.which.string].count++},f.AddOffenseBot.signature={which:"string"},f.AddOffenseBot.CC_provide="offense.AddOffenseBot",f.Attack=function(e,t){var n=t.getNamedObject("global"),r=n.scanning.landsSurveyed[0];if("enemy"==r.type){var s=r.strength-10*n.offense.bots.offenseBots;r.strength=Math.max(s,0),n.offense.bots.offenseBots=Math.abs(Math.min(0,s/10))}},f.Attack.signature={},f.Attack.CC_provide="offense.Attack",f.Secure=function(e,t){var n=t.getNamedObject("global"),r=n.scanning.landsSurveyed[0];if(r.strength)return t.view.warnToast("Enemy still has a presence");switch(r.type){case"resource":n.land.res_patches++;break;case"enemy":n.scanning.enemyDepth--,n.scanning.enemyDefeated++,n.scanning.penetrateEnemy=!1}n.land.total+=100,t.view.goodToast("Land secured"),n.scanning.penetrateDepth=!1,n.scanning.landsSurveyed.shift(),t.view.signaler.signal("updateEnemy")},f.Secure.signature={},f.Secure.CC_provide="offense.Secure",r.a.defineFeature("Offense",f);var l={Setup:function(e,t){var n=t.getNamedObject("global");!n.activeFeatures.defenseBlocks&&(n.activeFeatures.defenseBlocks={defense:!0}),!n.defense&&(n.defense={turrets:{},attackWaveTimer:0,nextAttackWave:100})}};l.Setup.Igor_Event={name:"Defense",type:"system_setup"},l.FeatureUpdate=function(e,t){var n=t.getNamedObject("global");n.activeFeatures.defenseBlocks||t.checkAndEmit("system_setup","Defense"),e.addEntity&&(n.defense.turrets[e.addEntity]={name:e.addEntity,count:0}),e.addComponent&&(n.defense[addComponent]=0),t.addEventHandler("tick",l.tick)},l.FeatureUpdate.Igor_Event={name:"Defense",type:"system_update"},l.addTurret=function(e,t){t.processTEMP("player.inventory","inventory.consume",{itemStacks:{name:"turret",count:1}})&&t.getNamedObject("global").defense.turrets.turret.count++},l.addTurret.signature={},l.addTurret.CC_provide="defense.AddTurret",l.tick=function(e,t){if(!(e.ticks%30)){var n=t.getNamedObject("global").defense;if(++n.attackWaveTimer>=n.nextAttackWave){var r,s;t.view.warnToast("Attack wave"),n.attackWaveTimer=0,n.nextAttackWave=1.2*n.nextAttackWave;var a=null==(r=t.getNamedObject("global").scanning)||null==(s=r.landsSurveyed)?void 0:s[0];"enemy"==(null==a?void 0:a.type)&&(n.nextAttackWave*=.8)}else n.nextAttackSecs=Math.ceil(n.nextAttackWave-n.attackWaveTimer)}},r.a.defineFeature("Defense",l);var d={land:{total:100,used:0,complexity:0,res_patches:2,res_patches_used:0,fac_block_costs:{factory:100,bus:100,research:100}},attackWaves:{nextTimer:100,nextStrength:100,currentTimer:0},facBlocks:{defenses:null,defenseBus:null,offense:null,offenseBus:null,resBlocks:[],buses:[],blocks:[],techBlocks:[]},player:a.a,activeFeatures:{tutorial:!0},research:{completed:{},progressing:null},unlocked_recipes:[],control:{bonusTicks:0},version:s.a};r.a.defineObj("#",d),r.a.setNamed("player.inventory","player.inv"),r.a.setNamed("research","research"),r.a.setNamed("global",""),r.a.setStatic("config.TICKS_PER_SECOND",s.e),r.a.addEventHandler("gameLoad",(function(e){var t=r.a.getNamed("global");if(t.control){var n=(new Date).getTime()-t.control.lastSave,a=Math.floor(n/1e3*s.e);console.log("added: "+a),t.control.bonusTicks+=Math.floor(a/20)}else t.control={bonusTicks:0}})),r.a.addEventHandler("gameSave",(function(e){r.a.getNamed("global").control.lastSave=(new Date).getTime()})),r.a.provide_CCC("game.fastForward",(function(e,t){var n=t.getNamedObject("global");"true"==e.to.string&&n.control.bonusTicks>0?(n.control.fastForward=!0,t.ticker.fastForward()):(n.control.fastForward=!1,t.ticker.fastForward(!1))}),{to:"string"}),r.a.addEventHandler("tick",(function(e,t){var n=t.getNamedObject("global");n.control.fastForward&&(n.control.bonusTicks--,n.control.bonusTicks<=0&&(n.control.fastForward=!0,t.ticker.fastForward(!1),n.control.bonusTicks=0))}));var m=function(){}}}]);
//# sourceMappingURL=app~fa1e48bf.d8631073d265f94b7d44.bundle.map