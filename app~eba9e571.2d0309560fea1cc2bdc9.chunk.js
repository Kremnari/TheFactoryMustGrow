(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{EfK0:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return c}));n("+Aae"),n("wb4v"),n("0d46");var i=function(){function t(){this.itemList={}}var e=t.prototype;return e.import=function(t){var e=this;Object.entries(t).forEach((function(t){var n=t[0],i=t[1],c=new r(i);e.itemList[n]=c}))},e.get=function(t){return this.itemList[t]},e.incrementX=function(t){return++this.itemList[t].count},e.addNotifyX=function(t,e){var n;null==(n=this.itemList[t])||n.notifys.push(e)},t}(),r=function(t,e){this.isVisible=!1,this.isCraftable=!1,this.entity=!1,this.notifys=[],this.set_count_callbacks=["ItemNotifys"],Object.assign(this,t)},c=function(){function t(t,e,n){void 0===n&&(n=!1),"string"==typeof t&&(this.name=t),"Object"==typeof t&&(this.name=t.name,this.item=t),this.count=e,this.filtered=n}return t.convert=function(e){return e.count?e:new t(e.name||e.item,e.amount)},t}()},MJ0g:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("+Aae"),r=n("0d46"),c=n("6juG"),s=function(){function t(){this.recipeList={},this.recipes_by_cats={hand_only:[],crafting:[]},this.showing_item=null,this.crafting={}}var e=t.prototype;return e.import=function(t,e){var n=this;this.itemMgr=e,Object.entries(t).forEach((function(t){var i=t[0],r=t[1],c=new a(r,e,n);c&&(c.ingCheck=function(t){c.ingredients.every((function(e){return t.total(e.name)>=e.amount}),n)?c.classes[o.enabled]="recipeEnabled":c.classes[o.enabled]="recipeDisabled"},c.classes[o.enabled]="recipeDisabled",n.recipeList[i]=c,c.category?(n.recipes_by_cats[c.category]||(n.recipes_by_cats[c.category]=[],n.crafting[c.category]=null),n.recipes_by_cats[c.category].push(c)):n.recipes_by_cats.hand_only.push(c),n.recipes_by_cats.crafting.push(c))}))},e.set_player=function(t){this.player=t},e.sub_ticker=function(t){var e=this;this.TickSub=t.subscribe((function(t){e.tick(t)}))},e.tick=function(){for(var t=0,e=Object.values(this.recipeList);t<e.length;t++){e[t].ingCheck(this.player.inv)}},e.canProduce=function(t,e){return t.ingredients.every((function(t){return e.total(t.name)>=t.amount||!1}))},e.canProduceMax=function(t,e){return t.ingredients.reduce((function(t,n){return Math.min(t,function(t){return Math.floor(e.total(t.name)/t.amount)}(n))}),1/0)},e.consumeIngs=function(t,e,n,i){void 0===n&&(n=1),void 0===i&&(i=!1),t.ingredients.forEach((function(t){i?e.add(t.name,t.amount*n):e.consume(t.name,t.amount*n)}))},e.startCraft=function(t,e,n){var i=this,r=this.crafting[n];if(null!=r&&(window.clearTimeout(r.timer),r.recipe.style="",r.recipe.classes[o.crafting]="",this.consumeIngs(r.recipe,e,1,!0),t.name==r.recipe.name))return this.crafting[n]=null,!1;if(this.canProduce(t,e)){r={},this.consumeIngs(t,e);var c=t.crafting_speed||t.crafting_time;r.timer=window.setTimeout((function(){i.crafting[n]=null,t.animTime=null,t.animClass=null,t.classes[o.crafting]="",i.craft(t,e)}),1e3*c),r.recipe=t,this.crafting[n]=r,t.animTime="animation-duration: "+c+"s",t.animClass="isCrafting",t.classes[o.crafting]="crafting"}},e.craft=function(t,e){t.results.forEach((function(t){e.add(t.name,t.amount||1)}))},e.recipesByTags=function(t,e,n){if(void 0===n&&(n=this.recipeList),null==e)return[];Array.isArray(e)||(e=[e]);var i=!1;return e.includes("crafting")&&(i=!0),Object.values(n).filter((function(n){return(null==n.enabled||n.enabled)&&(e.includes(n[t])||i&&!n[t])}))},t}(),a=function(){function t(t){var e,n=this;if(this.style="",this.classes=[],Object.assign(this,t),this.enabled=null==t.enabled||t.enabled,Object.defineProperty(this,"classesStr",{get:function(){return n.classes.join(" ")}}),""==this.icon&&(this.icon=null==(e=i.a.item.itemList[this.results[0].name])?void 0:e.icon),""==this.icon)return!1}return t.prototype.getClassesX=function(){return console.log("computed"),this.classes.join(" ")},t}(),o={enabled:0,crafting:1};r.b.provide("player.craft",(function(t,e,n){n.rec?(window.clearTimeout(n.timeout),e.processTEMP(t.player.inventory,"inventory.add",{itemStacks:n.rec.ingredients}),c.b.animsUpdate(n.rec,null,null),n.rec=void 0):e.processTEMP(t.player.inventory,"inventory.consume",{itemStacks:t.which.recipe.ingredients})?(n.rec=t.which.recipe,n.timeout=window.setTimeout((function(){e.processTEMP(t.player.inventory,"inventory.add",{itemStacks:n.rec.results}),c.b.animsUpdate(n.rec,null,null),n.rec=void 0}),1e3*t.which.recipe.crafting_speed),n.rec=t.which.recipe,c.b.animsUpdate(n.rec,"isCrafting",t.which.recipe.crafting_speed)):console.log("cannot craft")}),{which:"recipe",player:"inventory"})}}]);
//# sourceMappingURL=app~eba9e571.2d0309560fea1cc2bdc9.bundle.map