(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{EfK0:function(t,n,e){"use strict";e.d(n,"c",(function(){return a})),e.d(n,"b",(function(){return o})),e.d(n,"a",(function(){return u}));var i=e("+Aae");e("wb4v");function r(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"==typeof t)return s(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return s(t,n)}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(e=t[Symbol.iterator]()).next.bind(e)}function s(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}var a=function(){function t(){this.itemList={}}var n=t.prototype;return n.import=function(t){var n=this;Object.entries(t).forEach((function(t){var e=t[0],i=t[1],r=new c(i);n.itemList[e]=r}))},n.get=function(t){return this.itemList[t]},n.incrementX=function(t){return++this.itemList[t].count},n.addNotifyX=function(t,n){var e;null==(e=this.itemList[t])||e.notifys.push(n)},t}(),c=function(t,n){this.isVisible=!1,this.isCraftable=!1,this.entity=!1,this.notifys=[],this.set_count_callbacks=["ItemNotifys"],Object.assign(this,t)},o=function(){function t(t,n,e){void 0===e&&(e=!1),"string"==typeof t&&(this.name=t),"Object"==typeof t&&(this.name=t.name,this.item=t),this.count=n,this.filtered=e}return t.convert=function(n){return n.count?n:new t(n.name||n.item,n.amount)},t}(),u=function(){function t(t,n){void 0===t&&(t=0),this.items=Array.isArray(t)?t:new Array(t),this.max_stack=n}var n=t.prototype;return n.serialize=function(){return{items:this.items,max_stack:this.max_stack}},t.deserialize=function(n){return new t(n.items,n.max_stack)},n.deserialize=function(t){this.items=t.items,this.max_stack=t.max_stack},n[Symbol.iterator]=function(){return this.items},n.when=function(t,n){var e=this;this.check={itemStack:t,cb:n},this.check.sub=i.a.Ticker.subscribe((function(t){e.whenTickCheck()}))},n.whenTickCheck=function(){if(this.check&&this.total(this.check.itemStack.name)==this.check.itemStack.count){i.a.Ticker.dispose(this.check.sub);var t=this.check.cb;this.check=void 0,t()}},n.addAll=function(t,n,e){void 0===n&&(n=!0),void 0===e&&(e=1),Array.isArray(t)||(t=[t]);for(var i,s=[],a=0,c=r(t);!(i=c()).done;){var u=i.value;(a=this.add(u.item||u.name,(u.amount||u.count)*e))>0&&s.push(new o(u.name||u.item,a))}if(n)return s},n.addAllOrFail=function(t){for(
//! assume itemStacks is array
var n,e,i=[],s=0,a=!1,c=r(t);!(e=c()).done;){var u=e.value;if(n=o.convert(u),(s=this.add(n.name,n.count))>0){a=!0,n.count-=s,i.push(n);break}i.push(n)}if(a){for(var f,h=r(i);!(f=h()).done;){var m=f.value;this.consume(m.name,m.count)}return!1}return!0},n.consumeAll=function(t,n,e){void 0===n&&(n=!0),void 0===e&&(e=1),Array.isArray(t)||(t=[t]);for(var i,s=[],a=0,c=r(t);!(i=c()).done;){var u=i.value,f=o.convert(u);if(0===(a=this.consume(f.name,f.count*e)))s.push(f);else if(n)return s.length>=1&&this.addAll(s,!1,e),this.add(f.name,f.count-a),t}return!!n||[]},n.absorbFrom=function(t,n){for(var e,s=r(t.items);!(e=s()).done;){var a=e.value;if(a){var c;n&&a.name!=n||0!=a.count&&(c=this.add(a.name,a.count),t.consume(a.name,a.count-c))}}i.a.signaler.signal("generalUpdate")},n.setFilter=function(t,n,e){if(void 0===e&&(e=i.a.baseApp.player),t>this.items.length)return!1;var r=new o(n,0,!0);if(this.items[t])if(this.items[t].name==n)this.items[t].filtered=!0;else{var s=this.items[t];this.items.splice(t,1,r),e.inv.addAll(s,!1)}else this.items.splice(t,1,r);return!0},n.addFilter=function(t,n){void 0===n&&(n=i.a.baseApp.player);for(var e,s=r(this.items.entries());!(e=s()).done;){var a=e.value,c=a[0],u=a[1];if(!u)return this.items.splice(c,1,new o(t,0,!0)),!0;if(!(u.filtered||u.name!=t&&u.name))return u.filtered=!0,u.name=t,!0}return!1},n.seeFilteredItems=function(){var t=[];return this.items.forEach((function(n){return n.filtered&&t.push(n.name)})),t},n.removeFilter=function(t,n,e){void 0===e&&(e=i.a.baseApp.player);for(var s,a=r(this.items);!(s=a()).done;){var c=s.value;if(c.filtered&&c.name==t)return c.filtered=!1,n&&e.inv.addAll(c),0==c.count&&(c.name=void 0),!0}return!1},n.getTypes=function(t){void 0===t&&(t=!0);for(var n,e=[],i=r(this.items);!(n=i()).done;){var s=n.value;s&&!e.includes(s.name)&&(t||!t&&s.count>0)&&e.push(s.name)}return e},n.total=function(t,n){return void 0===n&&(n=!1),this.items.reduce((function(n,e){return e&&e.name==t?n+e.count:n}),0)},n.addStack=function(t){return 0==t.count?0:t.count-this.add(t.name,t.count)},n.add=function(t,n){if(0!=n){var e=this.max_stack||i.a.item.get(t).stack_size,r=this._GetAddStack(t,e);if(!r)return n;var s=Math.min(e-r.count,n);return r.count+=s,n-s>0?this.add(t,n-s):0}},n.consume=function(t,n){var e=this._GetSubStack(t,!1);return e?e.count>=n?(e.count-=n,0):(n-=e.count,e.count=0,this.consume(t,n)):n},n._GetAddStack=function(t,n){for(var e=-1,i=0,r=[function(e){return e&&e.name==t&&e.count<n},function(t){return t&&0==t.count},function(t){return!t}];i<r.length;i++){var s,a=r[i];if((e=this.items.findIndex(a))>-1&&(!(null==(s=this.items[e])?void 0:s.filtered)||this.items[e].name==t))break}return e>-1&&(!this.items[e]||this.items[e].name!=t)&&this.items.splice(e,1,{name:t,count:0}),this.items[e]},n._GetSubStack=function(t,n){void 0===n&&(n=!0);var e=this.items.length-1-this.items.slice().reverse().findIndex((function(n){return n&&n.name==t&&n.count>0}));return n?e:this.items[e]},n.click=function(t){switch(t.what){case"use":var n=t.which.item||i.a.item.get(t.which.name);if(t.which.count>0&&n.hasEntity)return t.where.useItem(t.which.name)&&t.which.count--,void i.a.signaler.signal("addedEntity");break;case"move":var e=t.rounder.val,r=t.where.inv.consume(t.which.name,e),s=t.who.inv.add(t.which.name,e-r);t.where.inv.add(t.which.name,s)}},t}()},MJ0g:function(t,n,e){"use strict";e.d(n,"a",(function(){return r}));var i=e("+Aae"),r=function(){function t(){this.recipeList={},this.recipes_by_cats={hand_only:[],crafting:[]},this.showing_item=null,this.crafting={}}var n=t.prototype;return n.import=function(t,n){var e=this;this.itemMgr=n,Object.entries(t).forEach((function(t){var i=t[0],r=t[1],c=new s(r,n,e);c&&(c.ingCheck=function(t){c.ingredients.every((function(n){return t.total(n.name)>=n.amount}),e)?c.classes[a.enabled]="recipeEnabled":c.classes[a.enabled]="recipeDisabled"},c.classes[a.enabled]="recipeDisabled",e.recipeList[i]=c,c.category?(e.recipes_by_cats[c.category]||(e.recipes_by_cats[c.category]=[],e.crafting[c.category]=null),e.recipes_by_cats[c.category].push(c)):e.recipes_by_cats.hand_only.push(c),e.recipes_by_cats.crafting.push(c))}))},n.set_player=function(t){this.player=t},n.sub_ticker=function(t){var n=this;this.TickSub=t.subscribe((function(t){n.tick(t)}))},n.tick=function(){for(var t=0,n=Object.values(this.recipeList);t<n.length;t++){n[t].ingCheck(this.player.inv)}},n.canProduce=function(t,n){return t.ingredients.every((function(t){return n.total(t.name)>=t.amount||!1}))},n.canProduceMax=function(t,n){return t.ingredients.reduce((function(t,e){return Math.min(t,function(t){return Math.floor(n.total(t.name)/t.amount)}(e))}),1/0)},n.consumeIngs=function(t,n,e,i){void 0===e&&(e=1),void 0===i&&(i=!1),t.ingredients.forEach((function(t){i?n.add(t.name,t.amount*e):n.consume(t.name,t.amount*e)}))},n.startCraft=function(t,n,e){var i=this,r=this.crafting[e];if(null!=r&&(window.clearTimeout(r.timer),r.recipe.style="",r.recipe.classes[a.crafting]="",this.consumeIngs(r.recipe,n,1,!0),t.name==r.recipe.name))return this.crafting[e]=null,!1;if(this.canProduce(t,n)){r={},this.consumeIngs(t,n);var s=t.crafting_speed||t.crafting_time;r.timer=window.setTimeout((function(){i.crafting[e]=null,t.style="",t.classes[a.crafting]="",i.craft(t,n)}),1e3*s),r.recipe=t,this.crafting[e]=r,t.style="animation: testXform "+s+"s",t.classes[a.crafting]="crafting"}},n.craft=function(t,n){t.results.forEach((function(t){n.add(t.name,t.amount||1)}))},n.recipesByTags=function(t,n,e){return void 0===e&&(e=this.recipeList),null==n?[]:(Array.isArray(n)||(n=[n]),Object.values(e).filter((function(e){return(null==e.enabled||e.enabled)&&(n.includes(e[t])||!e[t])})))},t}(),s=function(){function t(t){var n,e=this;if(this.style="",this.classes=[],Object.assign(this,t),this.enabled=null==t.enabled||t.enabled,Object.defineProperty(this,"classesStr",{get:function(){return e.classes.join(" ")}}),""==this.icon&&(this.icon=null==(n=i.a.item.itemList[this.results[0].name])?void 0:n.icon),""==this.icon)return!1}return t.prototype.getClassesX=function(){return console.log("computed"),this.classes.join(" ")},t}(),a={enabled:0,crafting:1}},O9YP:function(t,n,e){"use strict";e.d(n,"a",(function(){return a}));var i,r=e("EfK0"),s=e("aurelia-framework"),a=Object(s.d)(r.c)(i=function(){function t(t){this.resList={},this.mining=!1,this.ItemMgr=t}var n=t.prototype;return n.import=function(t){var n=this;Object.entries(t).forEach((function(t){var e=t[0],i=t[1];n.resList[e]=i}))},n.mine=function(t,n){var e=this,i=this.resList[t];this.mining?(window.clearTimeout(this.mining),this.mining=!1,i.miningStyle=""):(this.mining=window.setTimeout((function(){n.add(i.mining_results,1),e.mining=!1,i.miningStyle=""}),1e3*i.mining_time),i.miningStyle="animation: testXform "+i.mining_time+"s")},n.resListByTag=function(t,n){return null==n?[]:Object.values(this.resList).filter((function(e){return null==e[t]||n.includes(e[t])}))},t}())||i},mUjK:function(t,n,e){"use strict";e.d(n,"a",(function(){return i}));var i=function(){function t(){this.iconList={}}var n=t.prototype;return n.import=function(t){this.iconList=t;for(var n=0,e=Object.entries(this.iconList.tool);n<e.length;n++){var i=e[n],r=i[0],s=i[1];this.iconList.item[r]=s}},n.getSrc=function(t,n){if(!t)return"";if(t.indexOf("@")>-1&&!n){var e=t.split("@");t=e[0],n=e[1]}return this.iconList[t]&&this.iconList[t][n]||this.iconList.item[n]||null},t}()}}]);
//# sourceMappingURL=app~eba9e571.c5edc46c5013bb895c05.bundle.map