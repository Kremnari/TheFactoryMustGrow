(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{app:function(e,t,n){"use strict";n.r(t),n.d(t,"App",(function(){return g}));var r,i=n("aurelia-templating-resources"),s=n("aurelia-framework"),a=n("8p7n"),o=n("uShe"),c=n("3Qvj"),l=n("Evr9"),u=n("463H"),h=n("0d46");function d(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t,n,r,i,s,a){try{var o=e[s](a),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){m(s,r,i,a,o,"next",e)}function o(e){m(s,r,i,a,o,"throw",e)}a(void 0)}))}}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=Object(s.d)(i.a,o.a,c.a,s.b)(r=function(){function e(e,t,n,r){var i=this;this.viewPane={main:"home",showingItem:null},this.dataBase={},this.viewRecCat=!1,this.tooltip=null,window.tfmg=this,this.signaler=e,this.task=r,t.onLoadComplete((function(e){i.init(e,n)})),t.beginLoad(),this.CC=h.a,this.saveGame=t.saveGame}var t,n,r,i=e.prototype;return i.init=function(){var e=p(regeneratorRuntime.mark((function e(t,n){var r,i,s,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mgrs=t.mgrs,this.mgrs.DS=n,this.mgrs.baseApp=this,this.mgrs.signaler=this.signaler,t.save&&"0.02"==t.save.version)for(this.player=a.b.deserialize(this.mgrs,t.save.player),this.facBlocks=[],r=d(t.save.facBlocks);!(i=r()).done;)s=i.value,this.facBlocks.push(a.a.deserialize(s));else this.facBlocks=[],this.player=new a.b(20),this.mgrs.signaler.signal("generalUpdate"),l.a.start();return this.mgrs.rec.set_player(this.player),this.mgrs.rec.sub_ticker(this.mgrs.Ticker),this.select_FacBlock(this.player,!0),e.next=10,this.mgrs.idb.get("dev");case 10:this.showDev=e.sent,this.showDev||(this.mgrs.Ticker.subscribe((function(){console.log("saving"),o.save()}),u.a),this.mgrs.Ticker.toggle());case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),i.vrcToggle=function(e){this.viewRecCat=this.viewRecCat!=e&&e},i.resetSave=function(){this.saveGame()},i.showing=function(e,t){var n=this;this.viewPane.showingItem&&(this.viewPane.showingItem.selectedClass="");var r=this.viewPane.showingItem;this.viewPane.showingItem=null,this.viewPane.showingCat="",e&&r!=e&&window.setTimeout((function(){e.selectedClass="selected",n.viewPane.showingItem=e,n.viewPane.showingCat=t}),0)},i.add_FacBlock=function(e,t){if(!(t=t||prompt("Enter Block Name")))return!1;var n=new a.a(e,t);return this.facBlocks.push(n),n},i.select_FacBlock=function(e,t){void 0===t&&(t=!1),this.showItem=null,this.viewPane.facBlock=e,this.viewPlayer=t},i.save=function(){var e=p(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={player:{}},console.log("saving..."),t.version="0.02",t.techs=this.mgrs.tech.serialize(),t.player=this.player.serialize(),t.facBlocks=[],n=d(this.facBlocks);!(r=n()).done;)i=r.value,t.facBlocks.push(i.serialize());this.saveGame(t),console.log("...done");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.jumpStart=function(){this.player.inv.add("burner-mining-drill",2),this.player.inv.add("assembling-machine-1",2),this.player.inv.add("lab",2),this.player.inv.add("automation-science-pack",200)},i.testing=function(){this.player2=new a.b(10),this.add_FacBlock("resource","iron-mine"),this.facBlocks[0].lines[0].AddEntity("burner-mining-drill"),this.facBlocks[0].lines[0].AddEntity("burner-mining-drill"),this.facBlocks[0].lines[0].SetEntityFn(this.mgrs.res.resList["iron-ore"]),this.add_FacBlock("factory","iron-plates"),this.facBlocks[1].lines[0].AddEntity("stone-furnace"),this.facBlocks[1].lines[0].AddEntity("stone-furnace"),this.facBlocks[1].lines[0].SetEntityFn(this.mgrs.rec.recipeList["iron-plate"]),this.add_FacBlock("resource","copper-mine"),this.facBlocks[2].lines[0].AddEntity("burner-mining-drill"),this.facBlocks[2].lines[0].AddEntity("burner-mining-drill"),this.facBlocks[2].lines[0].SetEntityFn(this.mgrs.res.resList["copper-ore"]),this.add_FacBlock("factory","copper-plates"),this.facBlocks[3].lines[0].AddEntity("stone-furnace"),this.facBlocks[3].lines[0].AddEntity("stone-furnace"),this.facBlocks[3].lines[0].SetEntityFn(this.mgrs.rec.recipeList["copper-plate"]),this.add_FacBlock("bus","plates"),this.facBlocks[0].AddBusDrain(this.facBlocks[1]),this.facBlocks[1].AddBusDrain(this.facBlocks[4]),this.facBlocks[2].AddBusDrain(this.facBlocks[3]),this.facBlocks[3].AddBusDrain(this.facBlocks[4]),this.player.inv.add("inserter",10)},i.iconEditor=function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("iconEditor"!=this.viewPane){e.next=3;break}return this.viewPane={main:"home",showingItem:null},e.abrupt("return");case 3:return this.viewPane="iconEditor",this.IE={ds:{old:{},new:{}},select:{}},e.next=7,this.mgrs.idb.get("Icons");case 7:if(e.t0=e.sent,e.t0){e.next=12;break}return e.next=11,this.mgrs.idb.get("dataSet");case 11:e.t0=e.sent.icons;case 12:return this.IE.ds.new=e.t0,e.next=15,this.mgrs.idb.get("oldIcons");case 15:if(this.IE.ds.old=e.sent,e.t1=this.IE.ds.old,e.t1){e.next=23;break}return e.next=20,this.mgrs.idb.set("oldIcons",this.IE.ds.new);case 20:if(e.t2=e.sent,!e.t2){e.next=23;break}this.IE.ds.old=this.IE.ds.new;case 23:this.signaler.signal("update");case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.IEshow=function(){this.IE.showOld=this.IE.ds.old[this.IE.select.Cat][this.IE.select.Icon],this.IE.showNew=this.IE.ds.new[this.IE.select.Cat][this.IE.select.Icon],this.signaler.signal("update")},i.IEfiled=function(){var e=p(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e=p(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FileReader,e.abrupt("return",new Promise((function(e){n.onload=function(){e(n.result)},n.readAsDataURL(t)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=3,t(this.IE.file[0]);case 3:this.IE.fileBlob=e.sent;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.IEStore=function(){this.IE.ds.new[this.IE.select.Cat][this.IE.select.Icon]=this.IE.fileBlob},i.saveIconEditor=function(){var e=p(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mgrs.idb.set("Icons",this.IE.ds.new);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.dlIconEditor=function(){var e=document.createElement("a");e.download="icons.json",e.href="data:application/octet-stream:base64,"+JSON.stringify(this.IE.ds.new),e.style="display:none",document.body.appendChild(e),e.click()},i.ulIconEditor=function(){var e=p(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.IE.upload){e.next=2;break}return e.abrupt("return");case 2:return t=function(){var e=p(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FileReader,e.abrupt("return",new Promise((function(e){n.onload=function(){e(n.result)},n.readAsText(t)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.t0=JSON,e.next=6,t(this.IE.upload[0]);case 6:e.t1=e.sent,n=e.t0.parse.call(e.t0,e.t1),this.mgrs.idb.set("Icons",n),console.log("loaded");case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t=e,(n=[{key:"showItem",set:function(e){var t=this;this.viewPane.showingItem&&(this.viewPane.showingItem.selectedClass="");var n=this.viewPane.showingItem;this.viewPane.showingItem=null,this.viewPane.showingCat="",e&&n!=e.item&&window.setTimeout((function(){e.item.selectedClass="selected",t.viewPane.showingItem=e.item,t.viewPane.showingCat=e.cat}),0)}}])&&v(t.prototype,n),r&&v(t,r),e}())||r},wb4v:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("+Aae");var r=n("EfK0");function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t,n){if((null==n?void 0:n.debug)&&(console.log("debug:"),console.log(e),console.log(t),console.log(n)),0!=(null==n?void 0:n.maxXfer)){var s="entity"==(null==n?void 0:n.toAs)?"recieveItem":"addStack",a=0,o=function(i){(null==n?void 0:n.debug)&&console.log(i);var a=t[s](i);return(null==n?void 0:n.debug)&&console.log(a),a&&e.consumeAll(new r.b(i.name,a)),null==n||n.debug,a},c=(null==n?void 0:n.maxXfer)?function(e){return Math.min(e,n.maxXfer-a)}:function(e){return e};if(null==n?void 0:n.stacks)for(var l,u=i(n.stacks);!(l=u()).done;){o(l.value)}else for(var h,d=i(e.items);!(h=d()).done;){var f=h.value;if(f&&f.name&&0!=f.count&&((!(null==n?void 0:n.types)||n.types.includes(f.name))&&(a+=o({name:f.name,count:c(f.count)}),(null==n?void 0:n.debug)&&console.log("accum: "+a),(null==n?void 0:n.maxXfer)&&n.maxXfer==a)))return}}}n("0d46").a.InvXFer=a,globalThis.InvXFer=a}}]);
//# sourceMappingURL=app~f71cff67.ac9f58705a502aaa68d5.bundle.map